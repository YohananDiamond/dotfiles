#!/usr/bin/env sh

if [ $# != 1 ]; then
  printf >&2 "%s\n" "There should be at least one argument."
  exit 1
fi

if [ -z "$FLAMEDASH_SCR_FOLDER" ]; then
  printf >&2 "%s\n" "Please specify \$FLAMEDASH_SCR_FOLDER with the path to the screenshot."
  exit 1
fi

if ! type flameshot >/dev/null 2>/dev/null; then
  printf >&2 "%s\n" "Command 'flameshot' not found. please make sure it is on your \$PATH."
  exit 1
fi

if ! mkdir -p "$FLAMEDASH_SCR_FOLDER"; then
  printf >&2 "%s\n" "Could not make directory $FLAMEDASH_SCR_FOLDER."
fi

case "$1" in
  "") flameshot gui -p "$FLAMEDASH_SCR_FOLDER" ;;
  gui) flameshot gui -p "$FLAMEDASH_SCR_FOLDER" ;;
  full) flameshot full -p "$FLAMEDASH_SCR_FOLDER" ;;
  fullc) flameshot full -c ;;
  *)
    printf >&2 "%s\n" "Invalid command."
    exit 1
    ;;
esac
