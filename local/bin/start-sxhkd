#!/usr/bin/env sh

# Uses `gen-sxhkd` and then actually starts sxhkd.

sxhkdTemp="${SXHKD_TEMP:-~/.cache/sxhkd-config}"
mktemp="$(mktemp)"
gen-sxhkd $@ > "$sxhkdTemp"

if [ -n "$mktemp" ]; then
  rm "$mktemp"
  logfile="$mktemp.sxhkd"
  sxhkd -c "$sxhkdTemp" -r "$logfile"
else
  sxhkd -c "$sxhkdTemp"
fi
